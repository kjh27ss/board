{% extends 'layout.html' %}
{% block style %}
<link rel="stylesheet" href="/css/summernote-bs4.min.css">
{% endblock %}

{% block content %}

<h1 class="text-center mb-5">{{title}}</h1>
<form class="row was-validated" name="write_form" id="write_form" method="post" onsubmit="return checkForm(this)">
    <div class="col-md-6 my-3">
        <div class="row align-items-center">
           <label class="col-2" for="writer">ì´ë¦„</label>
           <div class="col-10">
               <input type="text" name="writer" class="form-control"
               placeholder="ì´ë¦„" id="writer" readonly value="{{row[0].writer}}" required />
              
           </div>    
        </div>       
    </div>
    <div class="col-md-6 row align-items-center my-3">
        <label class="col-2" for="pass">ë¹„ë°€ë²ˆí˜¸</label>
        <div class="col-10">
              <input type="password" name="pass" class="form-control"
               placeholder="ë¹„ë°€ë²ˆí˜¸" id="pass" />
            <!-- <input type="hidden" name="oldpass" id="oldpass" value="{{row[0].userpass}}"/> -->
        </div>       
    </div>
    <div class="col-md-12 row align-items-center my-3">
        <label class="col-md-1" for="title">ì œëª©</label>
        <div class="col-md-11">
            <input type="text" name="title" class="form-control"
               placeholder="ì œëª©" id="title" value="{{row[0].title}}" required />
        </div>
    </div>
    <div class="col-md-12 row align-items-center my-3">
        <label class="col-md-1" for="content">ë‚´ìš©</label>
        <div class="col-md-11">
           <textarea id="content" name="content" class="form-control">{{row[0].contents}}</textarea>
        </div>
    </div>      
    <div class="col-md-12 text-center my-3">
        <button type="reset" class="btn btn-danger mr-3"> ì·¨ ì†Œ </button>
        <button type="button" id="submit" class="btn btn-secondary ml-3"> ì „ ì†¡ </button>
    </div>  
    <input type="hidden" name="userid" value={{userid}} />
    <input type="hidden" name="num" value={{row[0].num}} id="num"/>
</form>

{% endblock %}

{% block script %}
<script src="/js/summernote-bs4.min.js"></script>
<script src="/js/lang/summernote-ko-KR.min.js"></script>
<script>
    $(function(){
        $("#content").summernote({
            tabsize: 2,
            height:300,
            lang:"ko-KR"
        });

        $('#submit').click(function(){            
            const forms = $('#write_form').serialize();
            const num = $("#num").val();
                $.ajax({
                url:'/pwdlogin',
                type:'post',
                data:forms,
                success:function(data){
                    const rs = parseInt(data);
                    if(rs > 0){
                        alert("ìˆ˜ì •ì„±ê³µ!ğŸ˜");
                        location.href="/view/"+num;
                    }else{
                        alert("ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ í™•ì¸í•˜ì„¸ìš”.");
                        return;
                    }
                }
            })
        });
    });

    
</script>
{% endblock %}